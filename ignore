local G = getgenv()
G.Key = "SAaRlAiS_aBhImRaAdHG2"

local lib = loadstring(game:HttpGet("https://raw.githubusercontent.com/RobSilas/lds-hub/main/library.txt"))()

local window = lib:start("Pet Simulator 99", "1.0 Global", true)

local tabAutoFarm = window:addTab("Auto Farm")
local tabAutoEgg = window:addTab("Auto Egg")
local tabAutoBuy = window:addTab("Auto Buy")
local tabAutoCollect = window:addTab("Auto Collect")
local tabAutoGame = window:addTab("Auto Games")
local tabBoostItens = window:addTab("Boost Itens")
local tabMachines = window:addTab("Machines")
local tabTeleport = window:addTab("Teleport")
local tabMisc = window:addTab("Misc")

-- Auto Farm 

function transformString(inputString)
	-- Encontra o índice do caractere '|'
	local separatorIndex = string.find(inputString, '|')

	-- Se encontrar o caractere '|'
	if separatorIndex ~= nil then
		-- Obtém a substring após o caractere '|', removendo espaços em branco no início e no final
		local transformedString = string.sub(inputString, separatorIndex + 2)
		transformedString = string.gsub(transformedString, "^%s*(.-)%s*$", "%1") -- Remove espaços em branco no início e final

		return transformedString
	else
		-- Se não encontrar o caractere '|', retorna a string original
		return inputString
	end
end

local AreasList = {}
local AreasNames = {}

for _, v in pairs(workspace.Map:GetChildren()) do
	if v.Name ~= "SHOP" then
		table.insert(AreasList, v.Name)
		table.insert(AreasNames, transformString(v.Name))
	end
end

local petsFolder = game:GetService("Players").LocalPlayer.PlayerGui.Inventory.Frame.Main.Pets.EquippedPets

local function getEquippedPets()
	local pets = {}
	for _, v in pairs(petsFolder:GetChildren()) do
		if v:IsA("TextButton") then
			pets[#pets+1] = v.Name
		end
	end
	return pets
end

local function findCoin(area)
	for _, v in pairs(workspace.__THINGS.Breakables:GetChildren()) do
		if v:IsA("Model") then
			local parentID = v:GetAttribute("ParentID")
			local vipBreakable = v:GetAttribute("VIPBreakable")

			if parentID == area and not vipBreakable then
				return v
			end
		end
	end
end


function criarArrayTarget(arrayDeStrings, valorAlvo)
	local novaArray = {}

	for _, chave in ipairs(arrayDeStrings) do
		novaArray[chave] = {
			targetType = "Breakable",
			targetValue = valorAlvo
		}
	end

	return novaArray
end

local AreaListAF = tabAutoFarm:addCombo("Select Area", "Select one of the options (This section updates automatically!)", AreasNames)
local ModeListAF = tabAutoFarm:addCombo("Select Mode", "Select one of the options (This section updates automatically!)", {"modo"})

tabAutoFarm:addToggle("Auto Farm (Area and Mode)", "By activating this option, you will automatically start farming coins in the selected area!","big", false, function(value) 
	while G.Settings["Auto Farm (Area and Mode)"] do
		if AreaListAF:getValue() ~= "" and findCoin(AreaListAF:getValue()) then	
			game:GetService("ReplicatedStorage"):WaitForChild("Network"):WaitForChild("Pets_SetTargetBulk"):FireServer(criarArrayTarget(getEquippedPets(), findCoin(AreaListAF:getValue()).Name))
		end
		task.wait(4)
	end
end)

-- Auto Egg

local EggsListAG = tabAutoEgg:addCombo("Select Egg", "Select one of the options (This section updates automatically!)", {"egg"})
local ModeListAG = tabAutoEgg:addCombo("Select Mode", "Select one of the options (This section updates automatically!)", {"modo"})

tabAutoEgg:addToggle("Auto Egg", "","big", false, function(value) 

end)
